(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{531:function(s,e,a){"use strict";a.r(e);var t=a(9),v=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis集群部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis集群部署"}},[s._v("#")]),s._v(" Redis集群部署")]),s._v(" "),e("h2",{attrs:{id:"概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),e("p",[s._v("本文提供了在CentOS 7上部署Redis集群的指南。其中包括安装Redis、配置Redis集群、设置服务器配置和线程限制，以及将Redis添加到系统服务中。建议根据实际需求进行详细配置，并遵循最小配置和建议配置来确保集群的性能和可靠性。")]),s._v(" "),e("h2",{attrs:{id:"你将获得"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#你将获得"}},[s._v("#")]),s._v(" 你将获得")]),s._v(" "),e("ul",[e("li",[s._v("安装Redis")]),s._v(" "),e("li",[s._v("配置Redis集群")]),s._v(" "),e("li",[s._v("设置服务器配置")]),s._v(" "),e("li",[s._v("设置线程限制")]),s._v(" "),e("li",[s._v("将Redis添加到系统服务")])]),s._v(" "),e("h2",{attrs:{id:"步骤1-准备工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-准备工作"}},[s._v("#")]),s._v(" 步骤1：准备工作")]),s._v(" "),e("p",[s._v("在开始部署之前，请确保满足以下先决条件：")]),s._v(" "),e("ul",[e("li",[s._v("CentOS 7操作系统")]),s._v(" "),e("li",[s._v("具有sudo权限的用户（例如，alinesno用户）")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("确保服务器满足以下要求：")]),s._v(" "),e("ul",[e("li",[s._v("内存：建议每个Redis节点至少具有1GB的内存。")]),s._v(" "),e("li",[s._v("存储：根据预期的数据存储需求，为Redis节点提供足够的磁盘空间。")]),s._v(" "),e("li",[s._v("CPU：建议每个Redis节点具有多个CPU核心以处理高并发的请求。")]),s._v(" "),e("li",[s._v("网络：确保服务器具有足够的网络带宽和稳定的网络连接。")])])]),s._v(" "),e("li",[e("p",[s._v("将用户"),e("code",[s._v("alinesno")]),s._v("添加到sudoers文件中，以便具有root权限。")])])]),s._v(" "),e("h2",{attrs:{id:"步骤2-安装redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-安装redis"}},[s._v("#")]),s._v(" 步骤2：安装Redis")]),s._v(" "),e("p",[s._v("按照以下步骤安装Redis：")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("打开终端并执行以下命令以安装Redis：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo yum install redis\n")])])])]),s._v(" "),e("li",[e("p",[s._v("安装完成后，验证Redis是否正确安装：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("redis-server --version\n")])])]),e("p",[s._v("应该显示Redis版本信息。")])])]),s._v(" "),e("h2",{attrs:{id:"步骤3-配置redis集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-配置redis集群"}},[s._v("#")]),s._v(" 步骤3：配置Redis集群")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("进入Redis配置目录：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd /etc/redis/\n")])])])]),s._v(" "),e("li",[e("p",[s._v("复制示例配置文件：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo cp redis.conf redis-cluster.conf\n")])])])]),s._v(" "),e("li",[e("p",[s._v("编辑"),e("code",[s._v("redis-cluster.conf")]),s._v("文件：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo vi redis-cluster.conf\n")])])])]),s._v(" "),e("li",[e("p",[s._v("在文件中，按需修改以下配置项：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("bind")]),s._v("：指定Redis绑定的IP地址。")]),s._v(" "),e("li",[e("code",[s._v("port")]),s._v("：指定Redis监听的端口号。")]),s._v(" "),e("li",[e("code",[s._v("cluster-enabled")]),s._v("：将其设置为"),e("code",[s._v("yes")]),s._v("以启用Redis集群模式。")]),s._v(" "),e("li",[e("code",[s._v("cluster-config-file")]),s._v("：指定Redis集群配置文件的路径和名称。")]),s._v(" "),e("li",[e("code",[s._v("cluster-node-timeout")]),s._v("：指定节点超时时间，建议设置为15000。")]),s._v(" "),e("li",[e("code",[s._v("appendonly")]),s._v("：将其设置为"),e("code",[s._v("yes")]),s._v("以启用AOF持久化。")])]),s._v(" "),e("p",[s._v("保存并退出文件。")])]),s._v(" "),e("li",[e("p",[s._v("创建Redis集群所需的目录：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo mkdir /var/lib/redis-cluster\n")])])])])]),s._v(" "),e("h2",{attrs:{id:"步骤4-设置服务器配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤4-设置服务器配置"}},[s._v("#")]),s._v(" 步骤4：设置服务器配置")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("打开终端并编辑"),e("code",[s._v("/etc/sysctl.conf")]),s._v("文件：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo vi /etc/sysctl.conf\n")])])])]),s._v(" "),e("li",[e("p",[s._v("在文件末尾添加以下配置项：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vm.overcommit_memory = 1\nnet.core.somaxconn = 65535\n")])])]),e("p",[s._v("保存并退出文件。")])]),s._v(" "),e("li",[e("p",[s._v("重新加载sysctl配置：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo sysctl -p\n")])])])]),s._v(" "),e("li",[e("p",[s._v("打开终端并编辑"),e("code",[s._v("/etc/security/limits.conf")]),s._v("文件：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo vi /etc/security/limits.conf\n")])])])]),s._v(" "),e("li",[e("p",[s._v("在文件末尾添加以下配置项：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("*    soft    nofile    65535\n*    hard    nofile    65535\n")])])]),e("p",[s._v("保存并退出文件。")])])]),s._v(" "),e("h2",{attrs:{id:"步骤5-设置线程限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤5-设置线程限制"}},[s._v("#")]),s._v(" 步骤5：设置线程限制")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("打开终端并编辑"),e("code",[s._v("/etc/systemd/system/redis.service.d/limit.conf")]),s._v("文件：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo vi /etc/systemd/system/redis.service.d/limit.conf\n")])])])]),s._v(" "),e("li",[e("p",[s._v("在文件中添加以下内容：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[Service]\nLimitNOFILE=65535\n")])])]),e("p",[s._v("保存并退出文件。")])]),s._v(" "),e("li",[e("p",[s._v("重新加载systemd配置：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo systemctl daemon-reload\n")])])])])])])}),[],!1,null,null,null);e.default=v.exports}}]);