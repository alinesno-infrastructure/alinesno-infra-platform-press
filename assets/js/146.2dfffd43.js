(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{574:function(a,s,i){"use strict";i.r(s);var e=i(15),t=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"minio集群部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minio集群部署"}},[a._v("#")]),a._v(" MinIO集群部署")]),a._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),s("p",[a._v("本文提供了部署MinIO集群的指南，包括最小配置和建议配置。MinIO是一个高性能的对象存储服务，可用于构建分布式存储系统。在部署MinIO集群之前，您需要准备服务器环境，并确保已将用户添加到sudoers文件中。")]),a._v(" "),s("h2",{attrs:{id:"你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#你将获得"}},[a._v("#")]),a._v(" 你将获得")]),a._v(" "),s("ul",[s("li",[a._v("MinIO集群的最小配置和建议配置")]),a._v(" "),s("li",[a._v("服务器配置和要求")]),a._v(" "),s("li",[a._v("limit线程的限制说明")]),a._v(" "),s("li",[a._v("将MinIO添加为系统服务")])]),a._v(" "),s("h2",{attrs:{id:"步骤1-准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-准备工作"}},[a._v("#")]),a._v(" 步骤1：准备工作")]),a._v(" "),s("p",[a._v("在开始部署之前，请确保满足以下先决条件：")]),a._v(" "),s("ul",[s("li",[a._v("CentOS 7或更高版本的操作系统")]),a._v(" "),s("li",[a._v("具有sudo权限的用户（例如alinesno）")])]),a._v(" "),s("ol",[s("li",[s("p",[a._v("确保服务器满足以下要求：")]),a._v(" "),s("ul",[s("li",[a._v("内存：建议每个MinIO节点至少具有4GB的内存。")]),a._v(" "),s("li",[a._v("存储：根据预期的数据负载和冗余需求，为MinIO节点提供足够的磁盘空间。")]),a._v(" "),s("li",[a._v("CPU：建议每个MinIO节点具有多个CPU核心以处理高吞吐量的请求。")]),a._v(" "),s("li",[a._v("网络：确保服务器具有足够的网络带宽和稳定的网络连接。")])])]),a._v(" "),s("li",[s("p",[a._v("将用户"),s("code",[a._v("alinesno")]),a._v("添加到sudoers文件中，以便具有root权限。")])])]),a._v(" "),s("h2",{attrs:{id:"步骤2-安装minio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-安装minio"}},[a._v("#")]),a._v(" 步骤2：安装MinIO")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("打开终端并执行以下命令以下载MinIO二进制文件：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("wget https://dl.min.io/server/minio/release/linux-amd64/minio\n")])])])]),a._v(" "),s("li",[s("p",[a._v("授予MinIO二进制文件执行权限：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod +x minio\n")])])])]),a._v(" "),s("li",[s("p",[a._v("将MinIO二进制文件移动到安装目录（例如"),s("code",[a._v("/home/alinesno/minio")]),a._v("）：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mv minio /home/alinesno/minio\n")])])])]),a._v(" "),s("li",[s("p",[a._v("创建MinIO数据存储目录：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir /home/alinesno/data\n")])])])])]),a._v(" "),s("h2",{attrs:{id:"步骤3-配置minio集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-配置minio集群"}},[a._v("#")]),a._v(" 步骤3：配置MinIO集群")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("打开终端并进入MinIO安装目录：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /home/alinesno/minio\n")])])])]),a._v(" "),s("li",[s("p",[a._v("创建一个新的配置文件"),s("code",[a._v("config.json")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vi config.json\n")])])])]),a._v(" "),s("li",[s("p",[a._v("在配置文件中，按需修改以下配置项：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("accessKey")]),a._v("：MinIO访问密钥。")]),a._v(" "),s("li",[s("code",[a._v("secretKey")]),a._v("：MinIO秘密密钥。")]),a._v(" "),s("li",[s("code",[a._v("region")]),a._v("：MinIO集群的地理区域。")]),a._v(" "),s("li",[s("code",[a._v("driveCount")]),a._v("：MinIO节点使用的磁盘驱动器数量。")])]),a._v(" "),s("p",[a._v("保存并退出文件。")])])]),a._v(" "),s("h2",{attrs:{id:"步骤4-启动minio集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤4-启动minio集群"}},[a._v("#")]),a._v(" 步骤4：启动MinIO集群")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("在终端中，使用以下命令启动MinIO集群：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./minio server /home/alinesno/data\n")])])]),s("p",[a._v("执行此命令以启动第一个MinIO节点。")])]),a._v(" "),s("li",[s("p",[a._v("如果您有多个MinIO节点，请在新的终端窗口中为每个节点重复步骤1，并使用不同的端口号和数据目录。")])])]),a._v(" "),s("h2",{attrs:{id:"步骤5-配置服务器限制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤5-配置服务器限制"}},[a._v("#")]),a._v(" 步骤5：配置服务器限制")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("打开终端并编辑"),s("code",[a._v("/etc/security/limits.conf")]),a._v("文件：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo vi /etc/security/limits.conf\n")])])])]),a._v(" "),s("li",[s("p",[a._v("在文件末尾添加以下行以限制线程数：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("*       soft    nofile  65536\n*       hard    nofile  65536\n*       soft    nproc   65536\n*       hard    nproc   65536\n")])])]),s("p",[a._v("保存并退出文件。")])]),a._v(" "),s("li",[s("p",[a._v("编辑"),s("code",[a._v("/etc/sysctl.conf")]),a._v("文件：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo vi /etc/sysctl.conf\n")])])])]),a._v(" "),s("li",[s("p",[a._v("在文件末尾添加以下行以增加内核线程数：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("fs.file-max = 2097152\nfs.nr_open = 2097152\n")])])])]),a._v(" "),s("li",[s("p",[a._v("创建MinIO数据存储目录：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir /home/alinesno/minio-data\n")])])])])]),a._v(" "),s("p",[a._v("这将是MinIO存储对象数据的目录。")]),a._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[s("p",[a._v("创建MinIO日志存储目录：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir /home/alinesno/minio-logs\n")])])]),s("p",[a._v("这将是MinIO的日志文件存储目录。")])])]),a._v(" "),s("h2",{attrs:{id:"步骤3-配置minio集群-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-配置minio集群-2"}},[a._v("#")]),a._v(" 步骤3：配置MinIO集群")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("编辑MinIO配置文件：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vi /home/alinesno/minio/config.json\n")])])])]),a._v(" "),s("li",[s("p",[a._v("在配置文件中，按需修改以下配置项：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("accessKey")]),a._v("：MinIO访问密钥。")]),a._v(" "),s("li",[s("code",[a._v("secretKey")]),a._v("：MinIO秘密密钥。")]),a._v(" "),s("li",[s("code",[a._v("region")]),a._v("：MinIO集群的地区。")]),a._v(" "),s("li",[s("code",[a._v("drive")]),a._v("：MinIO数据存储目录的路径。")]),a._v(" "),s("li",[s("code",[a._v("logDir")]),a._v("：MinIO日志存储目录的路径。")])]),a._v(" "),s("p",[a._v("保存并退出文件。")])])]),a._v(" "),s("h2",{attrs:{id:"步骤4-启动minio集群-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤4-启动minio集群-2"}},[a._v("#")]),a._v(" 步骤4：启动MinIO集群")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("打开终端并执行以下命令以启动MinIO集群：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("/home/alinesno/minio server /home/alinesno/minio-data\n")])])]),s("p",[a._v("这将启动一个MinIO节点，使用指定的数据存储目录。")])]),a._v(" "),s("li",[s("p",[a._v("如果您有多个MinIO节点，请在新的终端窗口中为每个节点重复步骤1，并使用不同的数据存储目录。")])])]),a._v(" "),s("h2",{attrs:{id:"步骤5-限制线程数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤5-限制线程数"}},[a._v("#")]),a._v(" 步骤5：限制线程数")]),a._v(" "),s("p",[a._v("在部署MinIO集群时，您可能需要限制MinIO进程的线程数。可以通过以下步骤进行限制：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("打开终端并执行以下命令以编辑MinIO启动脚本：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vi /home/alinesno/minio\n")])])])]),a._v(" "),s("li",[s("p",[a._v("在文件中，找到以下行：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ulimit -n 65536\n")])])])]),a._v(" "),s("li",[s("p",[a._v("将该行修改为所需")])])])])}),[],!1,null,null,null);s.default=t.exports}}]);