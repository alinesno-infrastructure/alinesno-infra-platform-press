(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{580:function(t,a,s){"use strict";s.r(a);var n=s(8),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"集成镜像仓库一键打成容器镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成镜像仓库一键打成容器镜像"}},[t._v("#")]),t._v(" 集成镜像仓库一键打成容器镜像")]),t._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),a("p",[t._v("本文档介绍了如何将系统集成到镜像仓库中，并提供一键打包成容器镜像的功能，以方便部署和扩展应用程序。")]),t._v(" "),a("h2",{attrs:{id:"你将获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#你将获取"}},[t._v("#")]),t._v(" 你将获取")]),t._v(" "),a("ul",[a("li",[t._v("镜像仓库的配置")]),t._v(" "),a("li",[t._v("一键打包成容器镜像的功能")])]),t._v(" "),a("h2",{attrs:{id:"集成方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成方式"}},[t._v("#")]),t._v(" 集成方式")]),t._v(" "),a("p",[t._v("通过集成 Jib Maven 插件，你可以将应用程序打包成容器镜像并推送到镜像仓库中。以下是一个集成的例子，你可以根据自己的需求进行相应的配置和调整。")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 版本管理")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PROJECT_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'alinesno-infra-simples'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PRO_VERSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0.0-SNAPSHOT'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_NUMBER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" github.run_number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 容器镜像")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ALIYUN_CR_REGISTORY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'registry.cn-shenzhen.aliyuncs.com'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ALIYUN_CR_NAMESPACE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'alinesno-infra-platform'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy to AliyunCR\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n    mvn -B -U -f ${{ env.PROJECT_NAME }}/pom.xml clean compile jib:build \\\n      -Ddocker.registry.name=${{ env.ALIYUN_CR_NAMESPACE }} \\\n      -Djib.to.tags=${{ env.PRO_VERSION }}.${{ env.BUILD_NUMBER }} \\\n      -Djib.to.auth.username=${{ secrets.ALIYUN_CR_USERNAME }} \\\n      -Djib.to.auth.password=${{ secrets.ALIYUN_CR_PASSWORD }}")]),t._v("\n")])])]),a("p",[t._v("在这个例子中，我们使用了 Jib Maven 插件，通过在 Maven 命令中传递参数来配置镜像仓库的相关信息。具体的参数说明如下：")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("PROJECT_NAME")]),t._v(": 项目名称。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("PRO_VERSION")]),t._v(": 项目版本。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("BUILD_NUMBER")]),t._v(": 构建编号。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ALIYUN_CR_REGISTORY")]),t._v(": 阿里云镜像仓库地址。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ALIYUN_CR_NAMESPACE")]),t._v(": 阿里云镜像仓库命名空间。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("jib.to.tags")]),t._v(": 容器镜像的标签，通常包括版本号和构建编号等信息。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("jib.to.auth.username")]),t._v(" 和 "),a("code",[t._v("jib.to.auth.password")]),t._v(": 镜像仓库的访问凭据，需要提供正确的用户名和密码。")])])]),t._v(" "),a("p",[t._v("请根据自己的项目和镜像仓库的要求，自定义传递指定的参数。")]),t._v(" "),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在集成镜像仓库一键打包成容器镜像时，请确保已经正确配置了镜像仓库的访问凭据（用户名和密码）。")])]),t._v(" "),a("li",[a("p",[t._v("请根据具体的需求和镜像仓库的要求，对集成的例子进行相应的调整和配置。")])])]),t._v(" "),a("h2",{attrs:{id:"术语和缩略语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#术语和缩略语"}},[t._v("#")]),t._v(" 术语和缩略语")]),t._v(" "),a("ul",[a("li",[t._v("镜像仓库：存储和管理容器镜像的仓库。")])]),t._v(" "),a("h2",{attrs:{id:"其它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它")]),t._v(" "),a("ul",[a("li",[t._v("无")])])])}),[],!1,null,null,null);a.default=e.exports}}]);