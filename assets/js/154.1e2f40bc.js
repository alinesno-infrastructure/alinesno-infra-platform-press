(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{587:function(t,a,s){"use strict";s.r(a);var n=s(15),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"智能体平台本地环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能体平台本地环境"}},[t._v("#")]),t._v(" 智能体平台本地环境")]),t._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),a("p",[t._v("智能体平台为AIP中的一部分，负责AI大模型和智能体的配置管理，主要包含两部分：")]),t._v(" "),a("ul",[a("li",[t._v("后端管理： 用于智能体的配置管理端")]),t._v(" "),a("li",[t._v("客户端：用于客户使用，多智能体场景")])]),t._v(" "),a("h2",{attrs:{id:"开发工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发工具"}},[t._v("#")]),t._v(" 开发工具")]),t._v(" "),a("p",[t._v("开发工具尽量按最简化的方式进行，以下为开发环境")]),t._v(" "),a("ul",[a("li",[t._v("[必须] mysql8")]),t._v(" "),a("li",[t._v("[必须] redis5+")]),t._v(" "),a("li",[t._v("[必须] jdk17+")]),t._v(" "),a("li",[t._v("[BaseSearch] postgresql(开启pgvector)")]),t._v(" "),a("li",[t._v("[BaseStorage] minio/qiniu: 当前使用七牛")])]),t._v(" "),a("h2",{attrs:{id:"涉及到的工程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#涉及到的工程"}},[t._v("#")]),t._v(" 涉及到的工程")]),t._v(" "),a("ul",[a("li",[t._v("common: 公共包"),a("a",{attrs:{href:"https://gitee.com/alinesno-infrastructure/alinesno-infra-common",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("model-adapter: 多模型适配包"),a("a",{attrs:{href:"https://gitee.com/alinesno-infrastructure/alinesno-infra-smart-model-adapater.git",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开"),a("OutboundLink")],1),t._v(",基于AgentFlex二次开发.")]),t._v(" "),a("li",[t._v("base-authority sso认证服务"),a("a",{attrs:{href:"https://gitee.com/alinesno-infrastructure/alinesno-infra-base-authority",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("smart-brain: 智能体平台"),a("a",{attrs:{href:"https://gitee.com/alinesno-infrastructure/alinesno-infra-smart-brain",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("这里只说明部署smart-brain智能体平台，common和authority参考文章"),a("a",{attrs:{href:"http://portal.infra.linesno.com/operation/02_%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/01_%E6%9C%8D%E5%8A%A1%E5%99%A8.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开"),a("OutboundLink")],1),t._v("的权限服务部分。")]),t._v(" "),a("h2",{attrs:{id:"本地部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地部署"}},[t._v("#")]),t._v(" 本地部署")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("先安装common包到本地，install即可,缺少actable包,"),a("a",{attrs:{href:"https://gitee.com/alinesno-infrastructure/alinesno-infra-common/issues/IBEK4W",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("安装model-adapter包到本地, install即可.")])]),t._v(" "),a("li",[a("p",[t._v("然后克隆smart-brain工程到idea包,分别启动:")]),t._v(" "),a("ul",[a("li",[t._v("服务端: alinesno-infra-smart-expert-boot")]),t._v(" "),a("li",[t._v("服务端前端: alinesno-infra-smart-expert-ui")]),t._v(" "),a("li",[t._v("客户端: alinesno-infra-smart-im-ui")])]),t._v(" "),a("p",[t._v("默认情况下,启动之后会连接开发环境的权限系统和sso认证系统,直接登陆即可,如需要修改成base-authority服务,以下为配置说明.")])]),t._v(" "),a("li",[a("p",[t._v("配置说明:")])])]),t._v(" "),a("p",[t._v("以下为主要配置:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30304")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# spring 配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alinesno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("smart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("expert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("boot\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1848341995578118144")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("datasource.dynamic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("primary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.cj.jdbc.Driver\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3306/dev_alinesno_infra_smart_assistant_v100"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("characterEncoding=UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("8"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&serverTimezone=GMT%2B8&allowMultiQueries=true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" adminer\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("postgresql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org.postgresql.Driver\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("postgresql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//192.168.101.18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("5432/postgres\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" postgres\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 127.0.0.1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6379")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" aip@local\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mvc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("async")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("request-timeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3600000")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("devtools")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("actable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("table")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("auto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" update\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("forest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("max-connections")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接池最大连接数")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("connect-timeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60000")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接超时时间，单位为毫秒")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("read-timeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("120000")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据读取超时时间，单位为毫秒")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sa-token配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sa-token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Authorization\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host-path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//alinesno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("identity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("application.beta.base.infra.linesno.com\n  \n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alinesno")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 排除路径")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("excludes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /sso/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /logout\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /v1/api/infra/base/im/roleChat/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /v1/api/infra/base/im/sse/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /v1/api/infra/base/im/chat/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /api/infra/base/im/channel/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /api/infra/smart/assistant/template/testTemplate\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /api/infra/smart/assistant/screenChapter/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /api/infra/smart/assistant/screen/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /api/infra/smart/assistant/screenLongtext/"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("xss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TODO 待处理XSS的问题")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("infra")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//alinesno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("authority"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("boot.beta.base.infra.linesno.com \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("smart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("brain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("qianwen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  sk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("xxxxxxxxx\n")])])]),a("p",[t._v("配置说明:")]),t._v(" "),a("ul",[a("li",[t._v("sa-token.host-path: 默认连接线上开发环境,如已部署base-authority,可修改成本地base-authority的地址 http://127.0.0.1:27001")]),t._v(" "),a("li",[t._v("alinesno.infra.gateway.host: 默认连接线上开发环境,如已部署base-authority,可修改成本地base-authority的地址 http://127.0.0.1:30100 [注意,这两个端口不一样]")]),t._v(" "),a("li",[t._v("alinesno.infra.smart.brain.qianwen.key: 阿里百炼的api-key,目前集成百炼较为深度(通用版本调整中)")])]),t._v(" "),a("h2",{attrs:{id:"角色测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#角色测试"}},[t._v("#")]),t._v(" 角色测试")]),t._v(" "),a("p",[t._v("以下为测试角色脚本,以请假角色为示例:")])])}),[],!1,null,null,null);a.default=e.exports}}]);